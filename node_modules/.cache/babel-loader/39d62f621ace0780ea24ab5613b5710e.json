{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/lepau/src/ZOE Inc/zoe-inc-and-associates-project/zoe-inc-and-associates/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/lepau/src/ZOE Inc/zoe-inc-and-associates-project/zoe-inc-and-associates/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/lepau/src/ZOE Inc/zoe-inc-and-associates-project/zoe-inc-and-associates/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{firestore}from'../Firebase/utils';import{useCollectionData}from'react-firebase-hooks/firestore';import{Box,Grid,TextField,Button,Typography,Paper}from'@mui/material';import ChatMessage from'../Components/ChatMessage';import{useSelector}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var mapUserState=function mapUserState(_ref){var user=_ref.user;return{currentUser:user.currentUser};};var mapUserDataState=function mapUserDataState(_ref2){var user=_ref2.user;return{userProfileData:user.userProfileData};};export var SuperChat=function SuperChat(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var _useSelector=useSelector(mapUserState),currentUser=_useSelector.currentUser;var _useSelector2=useSelector(mapUserDataState),userProfileData=_useSelector2.userProfileData;var messagesRef=firestore.collection('messages');var query=messagesRef.orderBy('createdAt').limit(25);console.log(messagesRef);var _useCollectionData=useCollectionData(query,{idField:'id'}),_useCollectionData2=_slicedToArray(_useCollectionData,1),messages=_useCollectionData2[0];var sendMessage=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var uid,userName;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:uid=currentUser.uid;userName=userProfileData.displayName;_context.next=4;return messagesRef.add({text:message,createdAt:new Date(),uid:uid,userName:userName});case 4:setMessage('');case 5:case\"end\":return _context.stop();}}},_callee);}));return function sendMessage(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Box,{sx:{backgroundColor:'dodgerblue',py:5,pl:4.5,pr:4,height:'100vh'},children:currentUser?/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"column\",spacing:{xs:4},alignItems:\"center\",sx:{height:'100vh',backgroundColor:'transparent'},children:[/*#__PURE__*/_jsx(Grid,{item:true,children:/*#__PURE__*/_jsx(Typography,{variant:\"h5\",fontWeight:\"bold\",children:\"Community Square\"})}),/*#__PURE__*/_jsxs(Paper,{item:true,container:true,elevation:10,direction:\"column\",spacing:{xs:2},sx:{backgroundColor:'gray',width:{xs:'90vw',md:'80vw'},height:'75vh',borderRadius:10,p:{xs:2,md:6}},children:[messages&&messages.map(function(msg){return/*#__PURE__*/_jsx(ChatMessage,{message:msg},msg.id);}),/*#__PURE__*/_jsxs(Grid,{container:true,item:true,justifyContent:\"flex-end\",children:[/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Enter Message...\",value:message,onChange:function onChange(e){setMessage(e.target.value);},sx:{input:{color:'white'},borderRadius:3,color:'white'}}),/*#__PURE__*/_jsx(Button,{fullWidth:true,onClick:function onClick(){return sendMessage();},sx:{height:50,backgroundColor:'black',mt:1,fontSize:40,border:'3px solid white',color:'#fff',fontWeight:'bold'},children:\"SEND\"})]})]})]}):/*#__PURE__*/_jsx(Typography,{children:\"YOU MUST BE LOGGED IN TO VIEW THIS PAGE...\"})});};","map":{"version":3,"names":["React","useState","firestore","useCollectionData","Box","Grid","TextField","Button","Typography","Paper","ChatMessage","useSelector","mapUserState","user","currentUser","mapUserDataState","userProfileData","SuperChat","props","message","setMessage","messagesRef","collection","query","orderBy","limit","console","log","idField","messages","sendMessage","uid","userName","displayName","add","text","createdAt","Date","backgroundColor","py","pl","pr","height","xs","width","md","borderRadius","p","map","msg","id","e","target","value","input","color","mt","fontSize","border","fontWeight"],"sources":["C:/Users/lepau/src/ZOE Inc/zoe-inc-and-associates-project/zoe-inc-and-associates/src/Pages/SuperChat.js"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { firestore } from '../Firebase/utils'\r\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\r\nimport { Box, Grid, TextField, Button, Typography, Paper } from '@mui/material'\r\nimport ChatMessage from '../Components/ChatMessage';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst mapUserState = ({ user }) => ({\r\n    currentUser: user.currentUser\r\n})\r\n\r\nconst mapUserDataState = ({user}) => ({\r\n    userProfileData: user.userProfileData\r\n})\r\n\r\nexport const SuperChat = (props) => {\r\n\r\n    const [message, setMessage] = useState()\r\n    const { currentUser } = useSelector(mapUserState)\r\n    const { userProfileData } = useSelector(mapUserDataState)\r\n    const messagesRef = firestore.collection('messages')\r\n    const query = messagesRef.orderBy('createdAt').limit(25)\r\n\r\n    console.log(messagesRef)\r\n    \r\n\r\n    const [messages] = useCollectionData(query, {idField: 'id'})\r\n\r\n    const sendMessage = async() => {\r\n        const uid = currentUser.uid\r\n        const userName = userProfileData.displayName\r\n        await messagesRef.add({\r\n            text: message,\r\n            createdAt: new Date(),\r\n            uid,\r\n            userName\r\n        })\r\n        setMessage('')\r\n    }\r\n  return (\r\n     <Box sx={{backgroundColor:'dodgerblue', py:5, pl:4.5, pr:4, height:'100vh'}}>\r\n            {currentUser ? < Grid container direction='column' spacing={{xs:4}} alignItems='center' sx={{height:'100vh', backgroundColor:'transparent'}}>\r\n                <Grid item>\r\n                    <Typography variant='h5' fontWeight='bold'>\r\n                        Community Square\r\n                    </Typography>\r\n                </Grid>\r\n                <Paper item container elevation={10} direction='column' spacing={{xs:2}} sx={{backgroundColor: 'gray', width:{xs:'90vw', md:'80vw'}, height:'75vh', borderRadius:10, p:{xs:2, md:6}}}>\r\n                    {messages && messages.map(msg => <ChatMessage key={msg.id} message={msg}/>)}\r\n                    <Grid container item justifyContent='flex-end' >\r\n                        <TextField fullWidth label='Enter Message...' value={message} onChange={(e) => { setMessage(e.target.value) }} sx={{ input:{ color: 'white'}, borderRadius:3, color:'white'}}/>\r\n                        <Button fullWidth onClick={() => sendMessage()} sx={{height:50, backgroundColor:'black', mt:1, fontSize:40, border:'3px solid white', color:'#fff', fontWeight:'bold'}}>\r\n                            SEND\r\n                        </Button>\r\n                    </Grid>\r\n                </Paper>  \r\n            </Grid> : <Typography>YOU MUST BE LOGGED IN TO VIEW THIS PAGE...</Typography>}\r\n        </Box>\r\n  )\r\n\r\n}\r\n\r\n\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}